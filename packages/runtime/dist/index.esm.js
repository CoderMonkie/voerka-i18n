import e from"@babel/runtime-corejs3/core-js-stable/weak-map";import t from"@babel/runtime-corejs3/core-js-stable/instance/reduce";import r from"@babel/runtime-corejs3/core-js-stable/object/keys";import a from"@babel/runtime-corejs3/core-js-stable/object/create";import n from"@babel/runtime-corejs3/core-js-stable/symbol/replace";import s from"@babel/runtime-corejs3/core-js-stable/array/from";import o from"@babel/runtime-corejs3/core-js-stable/symbol";import i from"@babel/runtime-corejs3/core-js/get-iterator-method";import l from"@babel/runtime-corejs3/core-js-stable/reflect/construct";import"core-js/modules/es.regexp.constructor.js";import"core-js/modules/es.regexp.dot-all.js";import"core-js/modules/es.regexp.sticky.js";import"core-js/modules/es.regexp.test.js";import"core-js/modules/es.reflect.to-string-tag.js";import c from"@babel/runtime-corejs3/helpers/asyncToGenerator";import u from"@babel/runtime-corejs3/helpers/classCallCheck";import f from"@babel/runtime-corejs3/helpers/createClass";import g from"@babel/runtime-corejs3/helpers/assertThisInitialized";import m from"@babel/runtime-corejs3/helpers/possibleConstructorReturn";import h from"@babel/runtime-corejs3/helpers/getPrototypeOf";import p from"@babel/runtime-corejs3/helpers/typeof";import b from"@babel/runtime-corejs3/helpers/toConsumableArray";import v from"@babel/runtime-corejs3/helpers/slicedToArray";import d from"@babel/runtime-corejs3/helpers/taggedTemplateLiteral";import y from"@babel/runtime-corejs3/helpers/inherits";import j from"@babel/runtime-corejs3/helpers/setPrototypeOf";import k from"@babel/runtime-corejs3/regenerator";import"core-js/modules/es.regexp.exec.js";import"core-js/modules/es.string.split.js";import"core-js/modules/es.string.substr.js";import"core-js/modules/es.function.name.js";import"core-js/modules/es.error.to-string.js";import"core-js/modules/es.date.to-string.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.regexp.to-string.js";import"core-js/modules/esnext.array.last-index.js";import"core-js/modules/es.string.replace.js";import"core-js/modules/es.error.cause.js";import"core-js/modules/es.array.iterator.js";import"core-js/modules/es.promise.js";import"core-js/modules/es.promise.all-settled.js";import"core-js/modules/es.string.iterator.js";import"core-js/modules/web.dom-collections.iterator.js";import _ from"@babel/runtime-corejs3/core-js-stable/string/raw";import x from"@babel/runtime-corejs3/core-js-stable/instance/includes";import L from"@babel/runtime-corejs3/core-js-stable/instance/map";import w from"@babel/runtime-corejs3/core-js-stable/instance/trim";import S from"@babel/runtime-corejs3/core-js-stable/instance/index-of";import M from"@babel/runtime-corejs3/core-js-stable/instance/last-index-of";import $ from"@babel/runtime-corejs3/core-js-stable/parse-int";import F from"@babel/runtime-corejs3/core-js-stable/instance/starts-with";import E from"@babel/runtime-corejs3/core-js-stable/instance/ends-with";import D from"@babel/runtime-corejs3/core-js-stable/instance/find-index";import A from"@babel/runtime-corejs3/core-js-stable/object/assign";import I from"@babel/runtime-corejs3/core-js/instance/replace-all";import N from"@babel/runtime-corejs3/core-js-stable/array/is-array";import T from"@babel/runtime-corejs3/core-js-stable/json/stringify";import O from"@babel/runtime-corejs3/core-js-stable/instance/concat";import P from"@babel/runtime-corejs3/core-js-stable/instance/splice";import C from"@babel/runtime-corejs3/core-js-stable/instance/for-each";import R from"@babel/runtime-corejs3/core-js-stable/object/entries";import V from"@babel/runtime-corejs3/core-js-stable/instance/slice";import z from"@babel/runtime-corejs3/core-js-stable/promise";import B from"@babel/runtime-corejs3/core-js-stable/object/get-prototype-of";import U from"@babel/runtime-corejs3/core-js-stable/set";import Y from"@babel/runtime-corejs3/core-js/global-this";import H from"@babel/runtime-corejs3/core-js-stable/instance/bind";var J,W=function(e){if("object"!==p(e)||null===e)return!1;var t=B(e);if(null===t)return!0;for(var r=t;null!==B(r);)r=B(r);return t===r},G=function(e){return!isNaN($(e))},q=function e(t,r){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=A({},t);return C(a=R(r)).call(a,(function(t){var r=v(t,2),a=r[0],o=r[1];if(a in s)if("object"===p(o)&&null!==o)if(N(o)){if(0===n.array)s[a]=o;else if(1===n.array){var i;s[a]=O(i=[]).call(i,b(s[a]),b(o))}else if(2===n.array){var l;s[a]=b(new U(O(l=[]).call(l,b(s[a]),b(o))))}}else s[a]=e(s[a],o,n);else s[a]=o;else s[a]=o})),s},K=function(e){return null===e?"Null":void 0===e?"Undefined":"function"==typeof e?"Function":e.constructor&&e.constructor.name},Q=function(){function e(){u(this,e),this._callbacks=[]}var t;return f(e,[{key:"on",value:function(e){var t;x(t=this._callbacks).call(t,e)||this._callbacks.push(e)}},{key:"off",value:function(e){for(var t=0;t<this._callbacks.length;t++){var r;if(this._callbacks[t]===e)P(r=this._callbacks).call(r,t,1)}}},{key:"offAll",value:function(){this._callbacks=[]}},{key:"emit",value:(t=c(k.mark((function e(){var t,r,a,n,s,o=arguments;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,r=new Array(t),a=0;a<t;a++)r[a]=o[a];if(!z.allSettled){e.next=6;break}return e.next=4,z.allSettled(L(n=this._callbacks).call(n,(function(e){return e.apply(void 0,r)})));case 4:e.next=8;break;case 6:return e.next=8,z.all(L(s=this._callbacks).call(s,(function(e){return e.apply(void 0,r)})));case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),X=W,Z=["String","Number","Boolean","Object","Array","Function","Null","Undefined","Symbol","Date","RegExp","Error"],ee=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(u(this,e),this._id=t.id||(new Date).getTime().toString()+$(1e3*Math.random()),this._languages=t.languages,this._defaultLanguage=t.defaultLanguage||"zh",this._activeLanguage=t.activeLanguage,this._default=t.default,this._messages=t.messages,this._idMap=t.idMap,this._formatters=t.formatters,this._loaders=t.loaders,this._global=null,this._patchMessages={},this.$cache={activeLanguage:null,typedFormatters:{},formatters:{}},!Y.VoerkaI18n){var a=Me.I18nManager;Y.VoerkaI18n=new a({defaultLanguage:this.defaultLanguage,activeLanguage:this.activeLanguage,languages:t.languages})}this.global=Y.VoerkaI18n,this._mergePatchedMessages(),this._patch(this._messages,newLanguage),this._loading=!1,this.register(r)}var t,r;return f(e,[{key:"id",get:function(){return this._id}},{key:"defaultLanguage",get:function(){return this._defaultLanguage}},{key:"activeLanguage",get:function(){return this._activeLanguage}},{key:"default",get:function(){return this._default}},{key:"messages",get:function(){return this._messages}},{key:"idMap",get:function(){return this._idMap}},{key:"formatters",get:function(){return this._formatters}},{key:"languages",get:function(){return this._languages}},{key:"loaders",get:function(){return this._loaders}},{key:"global",get:function(){return this._global},set:function(e){this._global=e}},{key:"register",value:function(e){"function"===!p(e)&&(e=function(){}),this.global.register(this).then(e).catch(e)}},{key:"registerFormatter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.language,n=void 0===a?"*":a;if("function"===!p(t)||"string"!=typeof e)throw new TypeError("Formatter must be a function");x(Z).call(Z,e)?this.formatters[n].$types[e]=t:this.formatters[n][e]=t}},{key:"registerDefaultLoader",value:function(e){this.global.registerDefaultLoader(e)}},{key:"_fallback",value:function(){this._messages=this._default,this._activeLanguage=this.defaultLanguage}},{key:"refresh",value:(r=c(k.mark((function e(t){var r,a,n;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._loading=z.resolve(),t||(t=this.activeLanguage),t!==this.defaultLanguage){e.next=7;break}return this._messages=this._default,e.next=6,this._patch(this._messages,t);case 6:return e.abrupt("return");case 7:if(r=this.loaders[t],e.prev=8,"function"!=typeof r){e.next=18;break}return e.next=12,r();case 12:return this._messages=e.sent.default,this._activeLanguage=t,e.next=16,this._patch(this._messages,t);case 16:e.next=26;break;case 18:if("function"!=typeof this.global.defaultMessageLoader){e.next=25;break}return e.next=21,this.global.loadMessagesFromDefaultLoader(t,this);case 21:this._messages=e.sent,this._activeLanguage=t,e.next=26;break;case 25:this._fallback();case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(8),console.warn(O(a=O(n="Error while loading language <".concat(t,"> on i18nScope(")).call(n,this.id,"): ")).call(a,e.t0.message)),this._fallback();case 32:case"end":return e.stop()}}),e,this,[[8,28]])}))),function(e){return r.apply(this,arguments)})},{key:"_patch",value:(t=c(k.mark((function e(t,r){var a;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof this.global.loadMessagesFromDefaultLoader){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.global.loadMessagesFromDefaultLoader(r,this);case 5:a=e.sent,X(a)&&(A(t,a),this._savePatchedMessages(a,r)),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,this,[[2,9]])}))),function(e,r){return t.apply(this,arguments)})},{key:"_mergePatchedMessages",value:function(){var e=this._getPatchedMessages(this.activeLanguage);X(e)&&A(this._messages,e)}},{key:"_savePatchedMessages",value:function(e,t){try{var r;if(Y.localStorage)Y.localStorage.setItem(O(r="voerkai18n_".concat(this.id,"_")).call(r,t,"_patched_messages"),T(e))}catch(e){console.error("Error while save voerkai18n patched messages:",e.message)}}},{key:"_getPatchedMessages",value:function(e){try{var t;return JSON.parse(localStorage.getItem(O(t="voerkai18n_".concat(this.id,"_")).call(t,e,"_patched_messages")))}catch(e){return{}}}},{key:"on",get:function(){var e;return H(e=this.global.on).call(e,this.global)}},{key:"off",get:function(){var e;return H(e=this.global.off).call(e,this.global)}},{key:"offAll",get:function(){var e;return H(e=this.global.offAll).call(e,this.global)}},{key:"change",get:function(){var e;return H(e=this.global.change).call(e,this.global)}}]),e}();function te(e){var t=function(){if("undefined"==typeof Reflect||!l)return!1;if(l.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(l(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=h(e);if(t){var n=h(this).constructor;r=l(a,arguments,n)}else r=a.apply(this,arguments);return m(this,r)}}function re(e,t){var r=void 0!==o&&i(e)||e["@@iterator"];if(!r){if(N(e)||(r=function(e,t){var r;if(!e)return;if("string"==typeof e)return ae(e,t);var a=V(r=Object.prototype.toString.call(e)).call(r,8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return s(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ae(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,c=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){u=!0,l=e},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw l}}}}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ne(){ne=function(e,t){return new i(e,void 0,t)};var s=RegExp.prototype,o=new e;function i(e,t,r){var a=new RegExp(e,t);return o.set(a,r||o.get(e)),j(a,i.prototype)}function l(e,n){var s,i=o.get(n);return t(s=r(i)).call(s,(function(t,r){return t[r]=e[i[r]],t}),a(null))}return y(i,RegExp),i.prototype.exec=function(e){var t=s.exec.call(this,e);return t&&(t.groups=l(t,this)),t},i.prototype[n]=function(e,t){if("string"==typeof t){var r=o.get(this);return s[n].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+r[t]})))}if("function"==typeof t){var a=this;return s[n].call(this,e,(function(){var e=arguments;return"object"!=p(e[e.length-1])&&(e=V([]).call(e)).push(l(e,a)),t.apply(this,e)}))}return s[n].call(this,e,t)},ne.apply(this,arguments)}var se=K,oe=G,ie=W,le=q,ce=Q,ue=ee,fe={"*":{$types:{Date:function(e){return e.toLocaleString()}},time:function(e){return e.toLocaleTimeString()},shorttime:function(e){return e.toLocaleTimeString()},date:function(e){return e.toLocaleDateString()},dict:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(var n=0;n<r.length;n+=2)if(r[n]===e)return r[n+1];return r.length>0&&r.length%2!=0?r[r.length-1]:e}},zh:{$types:{Date:function(e){var t,r,a,n,s;return O(t=O(r=O(a=O(n=O(s="".concat(e.getFullYear(),"年")).call(s,e.getMonth()+1,"月")).call(n,e.getDate(),"日 ")).call(a,e.getHours(),"点")).call(r,e.getMinutes(),"分")).call(t,e.getSeconds(),"秒")}},shortime:function(e){return e.toLocaleTimeString()},time:function(e){var t,r;return O(t=O(r="".concat(e.getHours(),"点")).call(r,e.getMinutes(),"分")).call(t,e.getSeconds(),"秒")},date:function(e){var t,r;return O(t=O(r="".concat(e.getFullYear(),"年")).call(r,e.getMonth()+1,"月")).call(t,e.getDate(),"日")},shortdate:function(e){var t,r;return O(t=O(r="".concat(e.getFullYear(),"-")).call(r,e.getMonth()+1,"-")).call(t,e.getDate())},currency:function(e){return"".concat(e,"元")}},en:{currency:function(e){return"$".concat(e)}}},ge=ne(/\{\s*(\w+)?((\s*\|\s*\w*(\(.*\))?\s*)*)\s*\}/g,{varname:1,formatters:2});function me(e){return x(e).call(e,"{")&&x(e).call(e,"}")}_(J||(J=d(["{s*{varname}s*}"],["\\{\\s*{varname}\\s*\\}"])));var he=["String","Number","Boolean","Object","Array","Function","Error","Symbol","RegExp","Date","Null","Undefined","Set","Map","WeakSet","WeakMap"];function pe(e){var t,r;if(!e)return[];var a=L(t=w(r=w(e).call(e).substr(1)).call(r).split("|")).call(t,(function(e){return w(e).call(e)}));return L(a).call(a,(function(e){var t=S(e).call(e,"("),r=M(e).call(e,")");if(-1!==t&&-1!==r){var a,n,s=w(a=e.substr(t+1,r-t-1)).call(a),o=""==s?[]:L(n=s.split(",")).call(n,(function(e){if(e=w(e).call(e),!isNaN($(e)))return $(e);if(F(e).call(e,'"')&&E(e).call(e,'"')||F(e).call(e,"'")&&E(e).call(e,"'"))return e.substr(1,e.length-2);if("true"===e.toLowerCase()||"false"===e.toLowerCase())return"true"===e.toLowerCase();if(!(F(e).call(e,"{")&&E(e).call(e,"}")||F(e).call(e,"[")&&E(e).call(e,"]")))return String(e);try{return JSON.parse(e)}catch(t){return String(e)}}));return[e.substr(0,t),o]}return[e,[]]}))}function be(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e,s=A({replaceAll:!0},a);for(ge.lastIndex=0;null!==(r=ge.exec(n));){var o=r.groups.varname||"",i=pe(r.groups.formatters);if("function"==typeof t)try{n=I(s)?I(n).call(n,r[0],t(o,i,r[0])):n.replace(r[0],t(o,i,r[0]))}catch(e){break}ge.lastIndex=0}return n}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.$cache={activeLanguage:t,typedFormatters:{},formatters:{}}}function de(e,t,r){var a,n=[],s=re(r);try{var o=function(){var r=a.value;if(r[0]){var s=function(e,t,r){if(e.$cache||ve(e),e.$cache.activeLanguage===t){if(r in e.$cache.formatters)return e.$cache.formatters[r]}else ve(e,t);for(var a=0,n=[e.formatters,e.global.formatters];a<n.length;a++){var s=n[a];if(t in s){var o=s[t]||{};if(r in o&&"function"==typeof o[r])return e.$cache.formatters[r]=o[r]}var i=s["*"]||{};if(r in i&&"function"==typeof i[r])return e.$cache.formatters[r]=i[r]}}(e,t,r[0]);"function"==typeof s?n.push((function(e){var t;return s.apply(void 0,O(t=[e]).call(t,b(r[1])))})):n.push((function(e){var t,a;return"function"==typeof e[r[0]]?(t=e[r[0]]).call.apply(t,O(a=[e]).call(a,b(r[1]))):e}))}};for(s.s();!(a=s.n()).done;)o()}catch(e){s.e(e)}finally{s.f()}return n}function ye(e,t,r,a){var n=de(e,t,r),s=function(e,t,r){if(e.$cache||ve(e),e.$cache.activeLanguage===t){if(r in e.$cache.typedFormatters)return e.$cache.typedFormatters[r]}else ve(e,t);for(var a=0,n=[e.formatters,e.global.formatters];a<n.length;a++){var s=n[a];if(s){if(t in s&&ie(s[t].$types)){var o=s[t].$types;if(r in o&&"function"==typeof o[r])return e.$cache.typedFormatters[r]=o[r]}if("*"in s&&ie(s["*"].$types)){var i=s["*"].$types;if(r in i&&"function"==typeof i[r])return e.$cache.typedFormatters[r]=i[r]}}}}(e,t,se(a));return s&&P(n).call(n,0,0,s),a=function(e,t){if(0===t.length)return e;var r=e;try{var a,n=re(t);try{for(n.s();!(a=n.n()).done;){var s=a.value;if("function"!=typeof s)return r;r=s(r)}}catch(e){n.e(e)}finally{n.f()}}catch(t){var o;console.error(O(o="Error while execute i18n formatter for ".concat(e,": ")).call(o,t.message," "))}return r}(a,n),a}function je(e){for(var t=this,r=t.global.activeLanguage,a=arguments.length,n=new Array(a>1?a-1:0),s=1;s<a;s++)n[s-1]=arguments[s];if(0===n.length||!me(e))return e;if(1===n.length&&ie(n[0])){var o=n[0];return be(e,(function(e,a){var n=e in o?o[e]:"";return ye(t,r,a,n)}))}var i=1===n.length&&N(n[0])?b(n[0]):n;if(0===i.length)return e;var l=0;return be(e,(function(e,a){if(i.length>l)return ye(t,r,a,i[l++]);throw new Error}),{replaceAll:!1})}var ke={defaultLanguage:"zh",activeLanguage:"zh",languages:[{name:"zh",title:"中文",default:!0},{name:"en",title:"英文"}],formatters:fe};function _e(e){return $(e)>0}function xe(e,t){try{return N(e)?e.length>t?e[t]:e[e.length-1]:e}catch(t){return N(e)?e[0]:e}}function Le(e){var t,r,a,n,s,o,i,l;return I(t=I(r=I(a=I(n=I(s=I(o=I(i=I(l=I(e).call(e,/\\(?![trnbvf'"]{1})/g,"\\\\")).call(l,"\t","\\t")).call(i,"\n","\\n")).call(o,"\b","\\b")).call(s,"\r","\\r")).call(n,"\f","\\f")).call(a,"'","\\'")).call(r,'"','\\"')).call(t,"\v","\\v")}function we(e){var t,r,a,n,s,o,i,l;return I(t=I(r=I(a=I(n=I(s=I(o=I(i=I(l=I(e).call(e,"\\t","\t")).call(l,"\\n","\n")).call(i,"\\b","\b")).call(o,"\\r","\r")).call(s,"\\f","\f")).call(n,"\\'","'")).call(a,'\\"','"')).call(r,"\\v","\v")).call(t,/\\\\(?![trnbvf'"]{1})/g,"\\")}var Se=function(e){y(i,ce);var t,r,a,n,s,o=te(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,i),e=o.call(this),null!=i.instance||(i.instance=g(e),e._settings=le(ke,t),e._scopes=[],e._defaultMessageLoader=null),m(e,i.instance)}return f(i,[{key:"settings",get:function(){return this._settings}},{key:"scopes",get:function(){return this._scopes}},{key:"activeLanguage",get:function(){return this._settings.activeLanguage}},{key:"defaultLanguage",get:function(){return this._settings.defaultLanguage}},{key:"languages",get:function(){return this._settings.languages}},{key:"formatters",get:function(){return fe}},{key:"defaultMessageLoader",get:function(){return this._defaultMessageLoader}},{key:"loadMessagesFromDefaultLoader",value:(s=c(k.mark((function e(t,r){return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof this._defaultMessageLoader){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._defaultMessageLoader.call(r,t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"change",value:(n=c(k.mark((function e(t){var r;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w(t).call(t),-1===D(r=this.languages).call(r,(function(e){return e.name===t}))&&"function"!=typeof this._defaultMessageLoader){e.next=9;break}return e.next=4,this._refreshScopes(t);case 4:return this._settings.activeLanguage=t,e.next=7,this.emit(t);case 7:e.next=10;break;case 9:throw new Error("Not supported language:"+t);case 10:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"_refreshScopes",value:(a=c(k.mark((function e(t){var r,a;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=L(r=this._scopes).call(r,(function(e){return e.refresh(t)})),!z.allSettled){e.next=7;break}return e.next=5,z.allSettled(a);case 5:e.next=9;break;case 7:return e.next=9,z.all(a);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.warn("Error while refreshing i18n scopes:",e.t0.message);case 14:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return a.apply(this,arguments)})},{key:"register",value:(r=c(k.mark((function e(t){return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t instanceof ue){e.next=2;break}throw new TypeError("Scope must be an instance of I18nScope");case 2:return this._scopes.push(t),e.next=5,t.refresh(this.activeLanguage);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"registerFormatter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.language,n=void 0===a?"*":a;if("function"===!p(t)||"string"!=typeof e)throw new TypeError("Formatter must be a function");x(he).call(he,e)?this.formatters[n].$types[e]=t:this.formatters[n][e]=t}},{key:"registerDefaultLoader",value:function(e){if("function"!=typeof e)throw new Error("The default loader must be a async function or promise returned");this._defaultMessageLoader=e,this.refresh()}},{key:"refresh",value:(t=c(k.mark((function e(){var t,r;return k.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=L(t=this._scopes).call(t,(function(e){return e.refresh()})),!z.allSettled){e.next=7;break}return e.next=5,z.allSettled(r);case 5:e.next=9;break;case 7:return e.next=9,z.all(r);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(){return t.apply(this,arguments)})}]),i}(),Me={getInterpolatedVars:function(e){var t=[];return be(e,(function(e,r,a){var n={name:e,formatters:L(r).call(r,(function(e){var t=v(e,2);return{name:t[0],args:t[1]}})),match:a};return-1===D(t).call(t,(function(e){return e.name===n.name&&n.formatters.toString()==e.formatters.toString()}))&&t.push(n),""})),t},replaceInterpolatedVars:je,I18nManager:Se,translate:function(e){var t=this,r=t.global.activeLanguage,a=e,n=[],s=[],o=null;if("string"===!p(e))return e;try{var i,l;if(2===arguments.length&&ie(arguments[1]))C(i=R(arguments[1])).call(i,(function(e){var t=v(e,2),r=t[0],a=t[1];if("function"==typeof a)try{n[r]=a()}catch(e){n[r]=a}F(r).call(r,"$")&&"number"==typeof n[r]&&s.push(r)})),n=[arguments[1]];else if(arguments.length>=2){var c,u;n=L(c=P(u=V(Array.prototype).call(arguments)).call(u,1)).call(c,(function(e,t){try{e="function"==typeof e?e():e,oe(e)&&(o=$(e))}catch(e){}return e}))}if(r===t.defaultLanguage)_e(a)&&(a=t.default[a]||e);else{var f=_e(a)?a:t.idMap[Le(a)];a=t.messages[f]||a,a=N(a)?L(a).call(a,(function(e){return we(e)})):we(a)}return N(a)&&a.length>0&&(a=null!==o?xe(a,o):pluralVar.length>0?xe(a,$(n(pluralVar[0]))):a[0]),0==n.length?a:je.call.apply(je,O(l=[t,a]).call(l,b(n)))}catch(e){return a}},i18nScope:ue,defaultLanguageSettings:ke,getDataTypeName:se,isNumber:oe,isPlainObject:ie};export{Me as default};
//# sourceMappingURL=index.esm.js.map
